
{% extends "main.html" %}

{% block content %}

<table class="table table-bordered mt-3">
    <tbody>
        <tr>
            <td colspan="2">{{result.title}}</td>
        </tr>
        <tr>
            <td>{{result.name}}</td>
            <td class="text-right">{{result.pubdate|formatdatetime}}</td>
        </tr>
        {% if result.attachfile %}
        <tr>
            <td>첨부파일</td>            
            <td><a href="{{ url_for('board.board_files', filename=result.attachfile) }}">{{ result.attachfile }}</a></td>
        </tr>
        {% endif %}
        <tr>
            <td colspan="2"><div style="min-height:200px">{% autoescape false%}{{result.contents}}{% endautoescape %}</div></td>
        </tr>
    </tbody>
</table>

<a class="btn btn-primary" href="{{ url_for('board.lists', page=page, search=search, keyword=keyword)}}">리스트로</a>

{% if session.id == result.writer_id %}
    <a class="btn btn-danger float-right ml-1" href="{{ url_for('board.board_delete', idx=result.id) }}">글삭제</a>
    <a class="btn btn-warning float-right" href="{{ url_for('board.board_edit', idx=result.id) }}">글수정</a>
{% endif%}

<br><br>
<!-- comment 입력-->
<form action="{{ url_for('board.comment_write') }}" name="commentForm" id="commentForm" method="post">
    <input type="hidden" name='csrf_token' value="{{ csrf_token() }}">
    <input type="hidden" name="root_idx" value="{{ result.id }}">
    <div>
        <span><strong>댓글</strong></span> <span id="cCnt">댓글 개수 만드네</span>
        <table class="table">
            <tr>
                <td><textarea name="comment" id="comment" cols="110" rows="3" placeholder="댓글을 입력하세요"></textarea></td>
                <td><input type="submit" value="전송하기" class="btn btn-primary" style="height:80px;"></td>
            </tr>
        </table>
    </div>
</form>

<!-- comment가 있으면 출력 -->
{% if comments %}

    {% for c in comments %}
        <div>
            <table class="table">
                <tr>
                    <td width="100"><h6>{{ c.name }}</h6></td>
                    <td>{{ c.comment }}</td>
                    <td class="text-right" width="200">{{ c.pubdate|formatdatetime }}</td>
                </tr>
            </table>
        </div>
    {% endfor %}

{% endif%}

{% endblock %}